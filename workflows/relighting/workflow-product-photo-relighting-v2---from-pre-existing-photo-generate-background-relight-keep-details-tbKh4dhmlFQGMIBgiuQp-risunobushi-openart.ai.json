{"last_node_id":253,"last_link_id":674,"nodes":[{"id":86,"type":"CLIPTextEncode","pos":[-2410,520],"size":{"0":400,"1":200},"flags":{},"order":29,"mode":0,"inputs":[{"name":"clip","type":"CLIP","link":340}],"outputs":[{"name":"CONDITIONING","type":"CONDITIONING","links":[545],"shape":3,"slot_index":0}],"properties":{"Node name for S&R":"CLIPTextEncode"},"widgets_values":["nsfw"]},{"id":82,"type":"CheckpointLoaderSimple","pos":[-2780,260],"size":{"0":315,"1":98},"flags":{},"order":0,"mode":0,"outputs":[{"name":"MODEL","type":"MODEL","links":[548,606],"shape":3,"slot_index":0},{"name":"CLIP","type":"CLIP","links":[339,340,604,605],"shape":3,"slot_index":1},{"name":"VAE","type":"VAE","links":[355,611],"shape":3,"slot_index":2}],"properties":{"Node name for S&R":"CheckpointLoaderSimple"},"widgets_values":["epicrealism_naturalSinRC1VAE.safetensors"]},{"id":98,"type":"VAEDecode","pos":[-1910,570],"size":{"0":210,"1":46},"flags":{},"order":37,"mode":0,"inputs":[{"name":"samples","type":"LATENT","link":354},{"name":"vae","type":"VAE","link":355,"slot_index":1}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[538],"shape":3,"slot_index":0}],"properties":{"Node name for S&R":"VAEDecode"}},{"id":75,"type":"GrowMaskWithBlur","pos":[215,1087],"size":{"0":315,"1":246},"flags":{},"order":49,"mode":0,"inputs":[{"name":"mask","type":"MASK","link":673}],"outputs":[{"name":"mask","type":"MASK","links":[572],"shape":3,"slot_index":0},{"name":"mask_inverted","type":"MASK","links":null,"shape":3}],"properties":{"Node name for S&R":"GrowMaskWithBlur"},"widgets_values":[0,0,true,false,28.1,1,1,false]},{"id":197,"type":"Note","pos":[-147,1395],"size":{"0":309.9846496582031,"1":102.63199615478516},"flags":{},"order":1,"mode":0,"properties":{"text":""},"widgets_values":["You can open import a Mask to use as a light source here, and link it to the Grow Mask With Blur node."],"color":"#432","bgcolor":"#653"},{"id":198,"type":"Note","pos":[229,857],"size":{"0":210,"1":58},"flags":{},"order":2,"mode":0,"properties":{"text":""},"widgets_values":["Regulate light intensity here.\nMAX = 1 is max light intensity."],"color":"#432","bgcolor":"#653"},{"id":79,"type":"Reroute","pos":[348,463],"size":[75,26],"flags":{},"order":35,"mode":0,"inputs":[{"name":"","type":"*","link":325}],"outputs":[{"name":"VAE","type":"VAE","links":[326,327,328,329],"slot_index":0}],"properties":{"showOutputText":true,"horizontal":false}},{"id":199,"type":"Note","pos":[657,280],"size":{"0":332.4533386230469,"1":66.57398986816406},"flags":{},"order":3,"mode":0,"properties":{"text":""},"widgets_values":["Multiplier's best values (in my testings) are between 0.15 and 0.21"],"color":"#432","bgcolor":"#653"},{"id":201,"type":"Note","pos":[-64,93],"size":{"0":373.7008361816406,"1":96.51365661621094},"flags":{},"order":4,"mode":0,"properties":{"text":""},"widgets_values":["Use iclight_sd15_fc model for no backgrounds workflows,\nuse the fbc model for background workflows.\nModels found here: https://huggingface.co/lllyasviel/ic-light/tree/main"],"color":"#432","bgcolor":"#653"},{"id":203,"type":"Note","pos":[-499,541],"size":{"0":306.7802734375,"1":58},"flags":{},"order":5,"mode":0,"properties":{"text":""},"widgets_values":["Resize at will"],"color":"#432","bgcolor":"#653"},{"id":157,"type":"Note","pos":[-881,684],"size":{"0":302.2235107421875,"1":69.18132019042969},"flags":{},"order":6,"mode":0,"properties":{"text":""},"widgets_values":["Optional Load Image node to load the subject directly instead of generating it.\nConnect it to the image resize node input."],"color":"#432","bgcolor":"#653"},{"id":76,"type":"PreviewImage","pos":[589,991],"size":{"0":363.1117858886719,"1":392.6006164550781},"flags":{},"order":58,"mode":0,"inputs":[{"name":"images","type":"IMAGE","link":318}],"properties":{"Node name for S&R":"PreviewImage"}},{"id":202,"type":"Note","pos":[-498,251],"size":{"0":312.00201416015625,"1":73.6064224243164},"flags":{},"order":7,"mode":0,"properties":{"text":""},"widgets_values":["Only works with 1.5 models.\nTested models: Photon and epicRealism NaturalSIN"],"color":"#432","bgcolor":"#653"},{"id":78,"type":"VAEEncode","pos":[394,394],"size":{"0":210,"1":46},"flags":{},"order":50,"mode":0,"inputs":[{"name":"pixels","type":"IMAGE","link":482,"slot_index":0},{"name":"vae","type":"VAE","link":326,"slot_index":1}],"outputs":[{"name":"LATENT","type":"LATENT","links":[593],"shape":3,"slot_index":0}],"properties":{"Node name for S&R":"VAEEncode"}},{"id":2,"type":"CheckpointLoaderSimple","pos":[-500,370],"size":{"0":315,"1":98},"flags":{},"order":8,"mode":0,"outputs":[{"name":"MODEL","type":"MODEL","links":[531],"shape":3,"slot_index":0},{"name":"CLIP","type":"CLIP","links":[4,5],"shape":3,"slot_index":1},{"name":"VAE","type":"VAE","links":[325],"shape":3,"slot_index":2}],"properties":{"Node name for S&R":"CheckpointLoaderSimple"},"widgets_values":["epicrealism_naturalSinRC1VAE.safetensors"]},{"id":200,"type":"Note","pos":[1035,265],"size":{"0":312.00201416015625,"1":73.6064224243164},"flags":{},"order":9,"mode":0,"properties":{"text":""},"widgets_values":["Tested with CFG between 2 and 3"],"color":"#432","bgcolor":"#653"},{"id":35,"type":"MaskToImage","pos":[601,858],"size":{"0":210,"1":26},"flags":{},"order":56,"mode":0,"inputs":[{"name":"mask","type":"MASK","link":573}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[221,318],"shape":3,"slot_index":0}],"properties":{"Node name for S&R":"MaskToImage"}},{"id":77,"type":"ICLightConditioning","pos":[652,399],"size":{"0":342.5999755859375,"1":138},"flags":{},"order":54,"mode":0,"inputs":[{"name":"positive","type":"CONDITIONING","link":640},{"name":"negative","type":"CONDITIONING","link":540},{"name":"vae","type":"VAE","link":327},{"name":"foreground","type":"LATENT","link":593},{"name":"opt_background","type":"LATENT","link":null}],"outputs":[{"name":"positive","type":"CONDITIONING","links":[335],"shape":3,"slot_index":0},{"name":"negative","type":"CONDITIONING","links":[336],"shape":3,"slot_index":1},{"name":"empty_latent","type":"LATENT","links":[],"shape":3,"slot_index":2}],"properties":{"Node name for S&R":"ICLightConditioning"},"widgets_values":[0.15]},{"id":50,"type":"VAEEncode","pos":[736,594],"size":{"0":210,"1":46},"flags":{},"order":57,"mode":0,"inputs":[{"name":"pixels","type":"IMAGE","link":221},{"name":"vae","type":"VAE","link":329,"slot_index":1}],"outputs":[{"name":"LATENT","type":"LATENT","links":[592],"shape":3,"slot_index":0}],"properties":{"Node name for S&R":"VAEEncode"}},{"id":37,"type":"LoadAndApplyICLightUnet","pos":[-70,242],"size":{"0":381.3333740234375,"1":58},"flags":{},"order":32,"mode":0,"inputs":[{"name":"model","type":"MODEL","link":531}],"outputs":[{"name":"MODEL","type":"MODEL","links":[137],"shape":3,"slot_index":0}],"properties":{"Node name for S&R":"LoadAndApplyICLightUnet"},"widgets_values":["iclight_sd15_fc.safetensors"]},{"id":85,"type":"CLIPTextEncode","pos":[-2410,250],"size":{"0":400,"1":200},"flags":{},"order":28,"mode":0,"inputs":[{"name":"clip","type":"CLIP","link":339}],"outputs":[{"name":"CONDITIONING","type":"CONDITIONING","links":[560],"shape":3,"slot_index":0}],"properties":{"Node name for S&R":"CLIPTextEncode"},"widgets_values":["product photography, still life photography of a red gucci bag, white backdrop"]},{"id":209,"type":"CLIPTextEncode","pos":[-3551.2234157985995,1484.8891465928905],"size":{"0":400,"1":200},"flags":{},"order":31,"mode":0,"inputs":[{"name":"clip","type":"CLIP","link":605}],"outputs":[{"name":"CONDITIONING","type":"CONDITIONING","links":[608],"shape":3,"slot_index":0}],"properties":{"Node name for S&R":"CLIPTextEncode"},"widgets_values":["nsfw"]},{"id":211,"type":"VAEDecode","pos":[-2991.2234157985995,1584.889146592891],"size":{"0":210,"1":46},"flags":{},"order":44,"mode":0,"inputs":[{"name":"samples","type":"LATENT","link":610},{"name":"vae","type":"VAE","link":611,"slot_index":1}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[612],"shape":3,"slot_index":0}],"properties":{"Node name for S&R":"VAEDecode"}},{"id":215,"type":"ControlNetLoader","pos":[-3471.2234157985995,1784.88914659289],"size":{"0":315,"1":58},"flags":{},"order":10,"mode":0,"outputs":[{"name":"CONTROL_NET","type":"CONTROL_NET","links":[614],"shape":3}],"properties":{"Node name for S&R":"ControlNetLoader"},"widgets_values":["control_sd15_depth.pth"]},{"id":208,"type":"CLIPTextEncode","pos":[-3551.2234157985995,1214.8891465928905],"size":{"0":400,"1":200},"flags":{},"order":30,"mode":0,"inputs":[{"name":"clip","type":"CLIP","link":604}],"outputs":[{"name":"CONDITIONING","type":"CONDITIONING","links":[616],"shape":3,"slot_index":0}],"properties":{"Node name for S&R":"CLIPTextEncode"},"widgets_values":["product photography, still life photography of a red gucci bag, in a forest"]},{"id":210,"type":"KSampler","pos":[-3041.2234157985995,1244.8891465928905],"size":{"0":315,"1":262},"flags":{"collapsed":false},"order":43,"mode":0,"inputs":[{"name":"model","type":"MODEL","link":606},{"name":"positive","type":"CONDITIONING","link":617},{"name":"negative","type":"CONDITIONING","link":608},{"name":"latent_image","type":"LATENT","link":618}],"outputs":[{"name":"LATENT","type":"LATENT","links":[610],"shape":3,"slot_index":0}],"properties":{"Node name for S&R":"KSampler"},"widgets_values":[180794899782057,"fixed",40,3.6,"dpmpp_2m_sde","karras",1]},{"id":181,"type":"EmptyLatentImage","pos":[-1960,670],"size":{"0":315,"1":106},"flags":{},"order":11,"mode":0,"outputs":[{"name":"LATENT","type":"LATENT","links":[546],"shape":3,"slot_index":0}],"properties":{"Node name for S&R":"EmptyLatentImage"},"widgets_values":[512,512,1]},{"id":216,"type":"EmptyLatentImage","pos":[-3061.2234157985995,1694.8891465928907],"size":{"0":315,"1":106},"flags":{},"order":12,"mode":0,"outputs":[{"name":"LATENT","type":"LATENT","links":[618],"shape":3,"slot_index":0}],"properties":{"Node name for S&R":"EmptyLatentImage"},"widgets_values":[512,512,1]},{"id":212,"type":"PreviewBridge","pos":[-2681.2234157985995,1254.8891465928905],"size":{"0":537.45556640625,"1":534.1554565429688},"flags":{},"order":45,"mode":0,"inputs":[{"name":"images","type":"IMAGE","link":612}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[619],"shape":3,"slot_index":0},{"name":"MASK","type":"MASK","links":[],"shape":3,"slot_index":1}],"properties":{"Node name for S&R":"PreviewBridge"},"widgets_values":["$212-0"]},{"id":214,"type":"ControlNetApply","pos":[-3483.2234157985995,1905.8891465928898],"size":{"0":317.4000244140625,"1":98},"flags":{},"order":40,"mode":0,"inputs":[{"name":"conditioning","type":"CONDITIONING","link":616},{"name":"control_net","type":"CONTROL_NET","link":614,"slot_index":1},{"name":"image","type":"IMAGE","link":615}],"outputs":[{"name":"CONDITIONING","type":"CONDITIONING","links":[617],"shape":3,"slot_index":0}],"properties":{"Node name for S&R":"ControlNetApply"},"widgets_values":[0.8]},{"id":207,"type":"PreviewImage","pos":[-1800.9587924395846,1452.251616241916],"size":{"0":482.60498046875,"1":560.2639770507812},"flags":{},"order":41,"mode":0,"inputs":[{"name":"images","type":"IMAGE","link":603}],"properties":{"Node name for S&R":"PreviewImage"}},{"id":204,"type":"GroundingDinoSAMSegment (segment anything)","pos":[-1457,1214],"size":{"0":352.79998779296875,"1":122},"flags":{},"order":39,"mode":0,"inputs":[{"name":"sam_model","type":"SAM_MODEL","link":600,"slot_index":0},{"name":"grounding_dino_model","type":"GROUNDING_DINO_MODEL","link":601,"slot_index":1},{"name":"image","type":"IMAGE","link":602}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[603,620],"shape":3,"slot_index":0},{"name":"MASK","type":"MASK","links":[622],"shape":3,"slot_index":1}],"properties":{"Node name for S&R":"GroundingDinoSAMSegment (segment anything)"},"widgets_values":["bag",0.3]},{"id":219,"type":"MaskToImage","pos":[-1378,1376],"size":{"0":210,"1":26},"flags":{},"order":42,"mode":0,"inputs":[{"name":"mask","type":"MASK","link":622}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[623],"shape":3,"slot_index":0}],"properties":{"Node name for S&R":"MaskToImage"}},{"id":205,"type":"SAMLoader","pos":[-1840,1185],"size":{"0":315,"1":82},"flags":{},"order":13,"mode":0,"outputs":[{"name":"SAM_MODEL","type":"SAM_MODEL","links":[600],"shape":3}],"properties":{"Node name for S&R":"SAMLoader"},"widgets_values":["sam_vit_b_01ec64.pth","Prefer GPU"]},{"id":217,"type":"Image Blend by Mask","pos":[-1906.5563422308906,2169.1119520399257],"size":{"0":315,"1":98},"flags":{},"order":46,"mode":0,"inputs":[{"name":"image_a","type":"IMAGE","link":619},{"name":"image_b","type":"IMAGE","link":620},{"name":"mask","type":"IMAGE","link":623}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[624],"shape":3,"slot_index":0}],"properties":{"Node name for S&R":"Image Blend by Mask"},"widgets_values":[1]},{"id":194,"type":"RemapMaskRange","pos":[224,956],"size":{"0":315,"1":82},"flags":{},"order":53,"mode":0,"inputs":[{"name":"mask","type":"MASK","link":572}],"outputs":[{"name":"mask","type":"MASK","links":[573],"shape":3,"slot_index":0}],"properties":{"Node name for S&R":"RemapMaskRange"},"widgets_values":[0,0.7000000000000001]},{"id":206,"type":"GroundingDinoModelLoader (segment anything)","pos":[-1835,1312],"size":{"0":361.20001220703125,"1":58},"flags":{},"order":14,"mode":0,"outputs":[{"name":"GROUNDING_DINO_MODEL","type":"GROUNDING_DINO_MODEL","links":[601],"shape":3}],"properties":{"Node name for S&R":"GroundingDinoModelLoader (segment anything)"},"widgets_values":["GroundingDINO_SwinT_OGC (694MB)"]},{"id":225,"type":"PreviewBridge","pos":[1035,705],"size":{"0":572.578857421875,"1":713.5889892578125},"flags":{},"order":61,"mode":0,"inputs":[{"name":"images","type":"IMAGE","link":642}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[650],"shape":3,"slot_index":0},{"name":"MASK","type":"MASK","links":[651],"shape":3,"slot_index":1}],"properties":{"Node name for S&R":"PreviewBridge"},"widgets_values":["$225-1715874199.7150035"]},{"id":188,"type":"LoadImageMask","pos":[-146,1013],"size":{"0":315,"1":318},"flags":{},"order":15,"mode":0,"outputs":[{"name":"MASK","type":"MASK","links":[],"shape":3,"slot_index":0}],"properties":{"Node name for S&R":"LoadImageMask"},"widgets_values":["hhhhhhhhhh (3).jpg","red","image"]},{"id":7,"type":"VAEDecode","pos":[1376,575],"size":{"0":210,"1":46},"flags":{},"order":60,"mode":0,"inputs":[{"name":"samples","type":"LATENT","link":77},{"name":"vae","type":"VAE","link":328,"slot_index":1}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[642,654,663],"shape":3,"slot_index":0}],"properties":{"Node name for S&R":"VAEDecode"}},{"id":240,"type":"ImageBlur","pos":[-94,1889],"size":{"0":315,"1":82},"flags":{},"order":68,"mode":0,"inputs":[{"name":"image","type":"IMAGE","link":666}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[667,668],"shape":3,"slot_index":0}],"properties":{"Node name for S&R":"ImageBlur"},"widgets_values":[31,1]},{"id":238,"type":"MaskToImage","pos":[-340,1900],"size":{"0":210,"1":26},"flags":{},"order":65,"mode":0,"inputs":[{"name":"mask","type":"MASK","link":664}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[665,666],"shape":3,"slot_index":0}],"properties":{"Node name for S&R":"MaskToImage"}},{"id":228,"type":"PreviewImage","pos":[1536,2153],"size":{"0":624.8050537109375,"1":748.5966796875},"flags":{},"order":74,"mode":0,"inputs":[{"name":"images","type":"IMAGE","link":647}],"properties":{"Node name for S&R":"PreviewImage"}},{"id":226,"type":"Image Blend by Mask","pos":[1192,2142],"size":{"0":315,"1":98},"flags":{},"order":73,"mode":0,"inputs":[{"name":"image_a","type":"IMAGE","link":650},{"name":"image_b","type":"IMAGE","link":662},{"name":"mask","type":"IMAGE","link":649}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[647],"shape":3,"slot_index":0}],"properties":{"Node name for S&R":"Image Blend by Mask"},"widgets_values":[0.8]},{"id":227,"type":"MaskToImage","pos":[1240,1770],"size":{"0":210,"1":26},"flags":{},"order":66,"mode":0,"inputs":[{"name":"mask","type":"MASK","link":652}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[649,653],"shape":3,"slot_index":0}],"properties":{"Node name for S&R":"MaskToImage"}},{"id":229,"type":"ImpactGaussianBlurMask","pos":[1190,1630],"size":{"0":315,"1":82},"flags":{},"order":64,"mode":0,"inputs":[{"name":"mask","type":"MASK","link":651}],"outputs":[{"name":"MASK","type":"MASK","links":[652],"shape":3,"slot_index":0}],"properties":{"Node name for S&R":"ImpactGaussianBlurMask"},"widgets_values":[40,50]},{"id":230,"type":"PreviewImage","pos":[1240,1850],"size":{"0":210,"1":246},"flags":{},"order":69,"mode":0,"inputs":[{"name":"images","type":"IMAGE","link":653}],"properties":{"Node name for S&R":"PreviewImage"}},{"id":233,"type":"PreviewImage","pos":[495,2348],"size":[210,246],"flags":{},"order":55,"mode":0,"inputs":[{"name":"images","type":"IMAGE","link":657}],"properties":{"Node name for S&R":"PreviewImage"}},{"id":231,"type":"PreviewImage","pos":[1710,726],"size":{"0":588.9126586914062,"1":750.3602294921875},"flags":{},"order":62,"mode":0,"inputs":[{"name":"images","type":"IMAGE","link":654}],"properties":{"Node name for S&R":"PreviewImage"}},{"id":237,"type":"MaskFromRGBCMYBW+","pos":[-710,1914],"size":{"0":315,"1":294},"flags":{},"order":63,"mode":0,"inputs":[{"name":"image","type":"IMAGE","link":663}],"outputs":[{"name":"red","type":"MASK","links":null,"shape":3},{"name":"green","type":"MASK","links":null,"shape":3},{"name":"blue","type":"MASK","links":null,"shape":3},{"name":"cyan","type":"MASK","links":null,"shape":3},{"name":"magenta","type":"MASK","links":null,"shape":3},{"name":"yellow","type":"MASK","links":null,"shape":3},{"name":"black","type":"MASK","links":null,"shape":3},{"name":"white","type":"MASK","links":[664],"shape":3,"slot_index":7}],"properties":{"Node name for S&R":"MaskFromRGBCMYBW+"},"widgets_values":[0.79,0.76,0.75,0,false]},{"id":239,"type":"PreviewImage","pos":[-337,1988],"size":[210,246],"flags":{},"order":67,"mode":0,"inputs":[{"name":"images","type":"IMAGE","link":665}],"properties":{"Node name for S&R":"PreviewImage"}},{"id":241,"type":"PreviewImage","pos":[-29,2022],"size":[210,246],"flags":{},"order":70,"mode":0,"inputs":[{"name":"images","type":"IMAGE","link":667}],"properties":{"Node name for S&R":"PreviewImage"}},{"id":236,"type":"PreviewImage","pos":[831,2355],"size":[210,246],"flags":{},"order":72,"mode":0,"inputs":[{"name":"images","type":"IMAGE","link":661}],"properties":{"Node name for S&R":"PreviewImage"}},{"id":5,"type":"CLIPTextEncode","pos":[-75,606],"size":{"0":400,"1":200},"flags":{},"order":34,"mode":0,"inputs":[{"name":"clip","type":"CLIP","link":5}],"outputs":[{"name":"CONDITIONING","type":"CONDITIONING","links":[540],"shape":3,"slot_index":0}],"properties":{"Node name for S&R":"CLIPTextEncode"},"widgets_values":["black and white"],"color":"#322","bgcolor":"#533"},{"id":19,"type":"KSampler","pos":[1032,389],"size":{"0":315,"1":262},"flags":{},"order":59,"mode":0,"inputs":[{"name":"model","type":"MODEL","link":137,"slot_index":0},{"name":"positive","type":"CONDITIONING","link":335,"slot_index":1},{"name":"negative","type":"CONDITIONING","link":336,"slot_index":2},{"name":"latent_image","type":"LATENT","link":592}],"outputs":[{"name":"LATENT","type":"LATENT","links":[77],"shape":3,"slot_index":0}],"properties":{"Node name for S&R":"KSampler"},"widgets_values":[100361857014344,"fixed",40,2,"dpmpp_2m_sde","karras",1]},{"id":156,"type":"LoadImage","pos":[-890,810],"size":{"0":315,"1":314.0000305175781},"flags":{},"order":16,"mode":0,"outputs":[{"name":"IMAGE","type":"IMAGE","links":[],"shape":3,"slot_index":0},{"name":"MASK","type":"MASK","links":[],"shape":3,"slot_index":1}],"properties":{"Node name for S&R":"LoadImage"},"widgets_values":["ffull.jpg","image"]},{"id":53,"type":"ImageResize+","pos":[-507,667],"size":{"0":315,"1":218},"flags":{},"order":48,"mode":0,"inputs":[{"name":"image","type":"IMAGE","link":672}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[482,655,670],"shape":3,"slot_index":0},{"name":"width","type":"INT","links":[],"shape":3,"slot_index":1},{"name":"height","type":"INT","links":[],"shape":3,"slot_index":2}],"properties":{"Node name for S&R":"ImageResize+"},"widgets_values":[1024,1024,"lanczos",false,"always",0]},{"id":243,"type":"PreviewBridge","pos":[-514,981],"size":[315,290],"flags":{},"order":52,"mode":0,"inputs":[{"name":"images","type":"IMAGE","link":670}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":null,"shape":3},{"name":"MASK","type":"MASK","links":[],"shape":3,"slot_index":1}],"properties":{"Node name for S&R":"PreviewBridge"},"widgets_values":["$243-1715874194.7150035"]},{"id":4,"type":"CLIPTextEncode","pos":[-71,355],"size":{"0":400,"1":200},"flags":{},"order":33,"mode":0,"inputs":[{"name":"clip","type":"CLIP","link":4}],"outputs":[{"name":"CONDITIONING","type":"CONDITIONING","links":[640],"shape":3,"slot_index":0}],"properties":{"Node name for S&R":"CLIPTextEncode"},"widgets_values":["harsh neon light, whiskey bottle in front of a mirror"],"color":"#232","bgcolor":"#353"},{"id":232,"type":"ColorCorrect","pos":[416,2101],"size":{"0":315,"1":178},"flags":{},"order":51,"mode":0,"inputs":[{"name":"image","type":"IMAGE","link":655}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[657,658],"shape":3,"slot_index":0}],"properties":{"Node name for S&R":"ColorCorrect"},"widgets_values":[5,-5,-40,70,-35,2]},{"id":234,"type":"DodgeAndBurn","pos":[778,2152],"size":{"0":315,"1":102},"flags":{},"order":71,"mode":0,"inputs":[{"name":"image","type":"IMAGE","link":658},{"name":"mask","type":"IMAGE","link":668}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[661,662],"shape":3,"slot_index":0}],"properties":{"Node name for S&R":"DodgeAndBurn"},"widgets_values":[0.8,"dodge"]},{"id":244,"type":"Note","pos":[-3056,1887],"size":{"0":309.9846496582031,"1":102.63199615478516},"flags":{},"order":17,"mode":0,"properties":{"text":""},"widgets_values":["This Group generates a new background, while maintaining the object coordinates in the same position through the Depth ControlNet.\nThe original object is then merged on top of this layer in the next group"],"color":"#432","bgcolor":"#653"},{"id":245,"type":"Note","pos":[-1287,1461],"size":[268.28191883456793,102.73437976083915],"flags":{},"order":18,"mode":0,"properties":{"text":""},"widgets_values":["This Group segments the original object from the background. \nChange the prompt in the GroundingDinoSAMSegment node to the appropriate description of the object"],"color":"#432","bgcolor":"#653"},{"id":220,"type":"PreviewBridge","pos":[-1544.5563422308906,2177.1119520399257],"size":{"0":484.1872253417969,"1":523.1453247070312},"flags":{},"order":47,"mode":0,"inputs":[{"name":"images","type":"IMAGE","link":624}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[672],"shape":3,"slot_index":0},{"name":"MASK","type":"MASK","links":[673],"shape":3,"slot_index":1}],"properties":{"Node name for S&R":"PreviewBridge"},"widgets_values":["$220-0"]},{"id":246,"type":"Note","pos":[-1901,2322],"size":{"0":268.28192138671875,"1":102.73438262939453},"flags":{},"order":19,"mode":0,"properties":{"text":""},"widgets_values":["This Group blends the original image on top of the new background"],"color":"#432","bgcolor":"#653"},{"id":247,"type":"Note","pos":[-1835,2588],"size":{"0":268.28192138671875,"1":102.73438262939453},"flags":{},"order":20,"mode":0,"properties":{"text":""},"widgets_values":["If you wish to relight the image by using a mask, you can either create a mask here using the open in mask editor option, or by using a pre-existing mask in the relight Group. Connect the appropriate mask output."],"color":"#432","bgcolor":"#653"},{"id":196,"type":"Note","pos":[222,1389],"size":{"0":309.9846496582031,"1":102.63199615478516},"flags":{},"order":21,"mode":0,"properties":{"text":""},"widgets_values":["You can open the Load Image node in Mask editor, create a mask and plug the mask output from the Preview Bridge node in the Blend original subject Group, or plug in a Load Image as mask node here as well if you don't want to create a mask via Photoshop or other tools."],"color":"#432","bgcolor":"#653"},{"id":248,"type":"Note","pos":[-878,2452],"size":[816.8556907571406,372.44679483038726],"flags":{},"order":22,"mode":0,"properties":{"text":""},"widgets_values":["Since this group is a lot harder to explain, please watch the livestream here (timestamp included): https://www.youtube.com/live/xjy3JyaPfHQ?si=GtqIp7bPHKYu3kUO&t=4058\n\nWhat this group basically does is:\n- get a light map of sorts from the generated image (in black and white) with the Mask From RGB node. Set up the thresholds appropriately to get a good light map;\n- use the light map to apply a dodge effect to preserve lights;\n- color correct the original image to reflect the new lighting in the generated image;\n- blends the two images (original and generated) according to a mask you need to set up around the details you'd like to retain, such as words on a bottle.\n\nI would advise against using this group, and instead use the frequency separation technique I demonstrate in the same video in Photoshop, it's much faster and more precise.\n\nThis was a challenge one of my viewers asked me to do."],"color":"#432","bgcolor":"#653"},{"id":249,"type":"Note","pos":[1535,1617],"size":[251.8176041980123,88.38092909742545],"flags":{},"order":23,"mode":0,"properties":{"text":""},"widgets_values":["Mask the details area you wish to retain from the original image in the Preview Bridge node up here."],"color":"#432","bgcolor":"#653"},{"id":250,"type":"Note","pos":[1268,2781],"size":{"0":251.81761169433594,"1":88.38092803955078},"flags":{},"order":24,"mode":0,"properties":{"text":""},"widgets_values":["Blended image with finer details from the original image and new lighting from the generated image"],"color":"#432","bgcolor":"#653"},{"id":87,"type":"KSampler","pos":[-1960,230],"size":{"0":315,"1":262},"flags":{"collapsed":false},"order":36,"mode":0,"inputs":[{"name":"model","type":"MODEL","link":548},{"name":"positive","type":"CONDITIONING","link":560},{"name":"negative","type":"CONDITIONING","link":545},{"name":"latent_image","type":"LATENT","link":546}],"outputs":[{"name":"LATENT","type":"LATENT","links":[354],"shape":3,"slot_index":0}],"properties":{"Node name for S&R":"KSampler"},"widgets_values":[180794899782057,"fixed",40,3.6,"dpmpp_2m_sde","karras",1]},{"id":179,"type":"PreviewBridge","pos":[-1587,237],"size":{"0":537.45556640625,"1":534.1554565429688},"flags":{},"order":38,"mode":0,"inputs":[{"name":"images","type":"IMAGE","link":538}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[602,615],"shape":3,"slot_index":0},{"name":"MASK","type":"MASK","links":[],"shape":3,"slot_index":1}],"properties":{"Node name for S&R":"PreviewBridge"},"widgets_values":["$179-0"]},{"id":251,"type":"LoadImage","pos":[-3667,260],"size":[315,313.99997329711914],"flags":{},"order":25,"mode":0,"outputs":[{"name":"IMAGE","type":"IMAGE","links":[],"shape":3,"slot_index":0},{"name":"MASK","type":"MASK","links":null,"shape":3}],"properties":{"Node name for S&R":"LoadImage"},"widgets_values":["0001.png0001 (1).png","image"]},{"id":195,"type":"Note","pos":[-2772,623],"size":{"0":309.9846496582031,"1":102.63199615478516},"flags":{},"order":26,"mode":0,"properties":{"text":""},"widgets_values":["This Group generates a product shot.\nIf you already have a product shot, you can bypass it and use either the currently unconnected Load Image node here and connect it to the SAM and background groups, or the currently unconnected Load Image node in the Relight Group to upload the source image to bypass the background generation completely, and connect it to image resize in the Relight Group."],"color":"#432","bgcolor":"#653"},{"id":253,"type":"Note","pos":[-3659,637],"size":{"0":309.9846496582031,"1":102.63199615478516},"flags":{},"order":27,"mode":0,"properties":{"text":""},"widgets_values":["Place starting product photo you already have here, and connect it to:\n- depth anything node in the background generator group;\n- SAM group"],"color":"#432","bgcolor":"#653"}],"links":[[4,2,1,4,0,"CLIP"],[5,2,1,5,0,"CLIP"],[77,19,0,7,0,"LATENT"],[137,37,0,19,0,"MODEL"],[221,35,0,50,0,"IMAGE"],[318,35,0,76,0,"IMAGE"],[325,2,2,79,0,"*"],[326,79,0,78,1,"VAE"],[327,79,0,77,2,"VAE"],[328,79,0,7,1,"VAE"],[329,79,0,50,1,"VAE"],[335,77,0,19,1,"CONDITIONING"],[336,77,1,19,2,"CONDITIONING"],[339,82,1,85,0,"CLIP"],[340,82,1,86,0,"CLIP"],[354,87,0,98,0,"LATENT"],[355,82,2,98,1,"VAE"],[482,53,0,78,0,"IMAGE"],[531,2,0,37,0,"MODEL"],[538,98,0,179,0,"IMAGE"],[540,5,0,77,1,"CONDITIONING"],[545,86,0,87,2,"CONDITIONING"],[546,181,0,87,3,"LATENT"],[548,82,0,87,0,"MODEL"],[560,85,0,87,1,"CONDITIONING"],[572,75,0,194,0,"MASK"],[573,194,0,35,0,"MASK"],[592,50,0,19,3,"LATENT"],[593,78,0,77,3,"LATENT"],[600,205,0,204,0,"SAM_MODEL"],[601,206,0,204,1,"GROUNDING_DINO_MODEL"],[602,179,0,204,2,"IMAGE"],[603,204,0,207,0,"IMAGE"],[604,82,1,208,0,"CLIP"],[605,82,1,209,0,"CLIP"],[606,82,0,210,0,"MODEL"],[608,209,0,210,2,"CONDITIONING"],[610,210,0,211,0,"LATENT"],[611,82,2,211,1,"VAE"],[612,211,0,212,0,"IMAGE"],[614,215,0,214,1,"CONTROL_NET"],[615,179,0,214,2,"IMAGE"],[616,208,0,214,0,"CONDITIONING"],[617,214,0,210,1,"CONDITIONING"],[618,216,0,210,3,"LATENT"],[619,212,0,217,0,"IMAGE"],[620,204,0,217,1,"IMAGE"],[622,204,1,219,0,"MASK"],[623,219,0,217,2,"IMAGE"],[624,217,0,220,0,"IMAGE"],[640,4,0,77,0,"CONDITIONING"],[642,7,0,225,0,"IMAGE"],[647,226,0,228,0,"IMAGE"],[649,227,0,226,2,"IMAGE"],[650,225,0,226,0,"IMAGE"],[651,225,1,229,0,"MASK"],[652,229,0,227,0,"MASK"],[653,227,0,230,0,"IMAGE"],[654,7,0,231,0,"IMAGE"],[655,53,0,232,0,"IMAGE"],[657,232,0,233,0,"IMAGE"],[658,232,0,234,0,"IMAGE"],[661,234,0,236,0,"IMAGE"],[662,234,0,226,1,"IMAGE"],[663,7,0,237,0,"IMAGE"],[664,237,7,238,0,"MASK"],[665,238,0,239,0,"IMAGE"],[666,238,0,240,0,"IMAGE"],[667,240,0,241,0,"IMAGE"],[668,240,0,234,1,"IMAGE"],[670,53,0,243,0,"IMAGE"],[672,220,0,53,0,"IMAGE"],[673,220,1,75,0,"MASK"]],"groups":[{"title":"relight","bounding":[-975,-50,2638,1573],"color":"#3f789e","font_size":24},{"title":"Generate Still Life Product Shot","bounding":[-2823,134,1813,927],"color":"#3f789e","font_size":24},{"title":"Background Generator","bounding":[-3739,1105,1664,938],"color":"#3f789e","font_size":24},{"title":"Segment Anything","bounding":[-2040,1103,1033,924],"color":"#3f789e","font_size":24},{"title":"Blend original subject on top of background","bounding":[-1950,2067,947,685],"color":"#3f789e","font_size":24},{"title":"Generate image and Background","bounding":[-3842,27,2850,2824],"color":"#A88","font_size":24},{"title":"(Optional) Preserve details, such as words, from the original image","bounding":[-975,1533,3174,1385],"color":"#3f789e","font_size":24}],"config":{},"extra":{},"version":0.4}